global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: berhot-local
    environment: development

rule_files:
  - /etc/prometheus/rules/*.yml

scrape_configs:
  - job_name: prometheus
    static_configs:
      - targets: ["localhost:9090"]

  - job_name: kong
    static_configs:
      - targets: ["kong:8001"]
    metrics_path: /metrics

  - job_name: platform-services
    static_configs:
      - targets:
          - "identity-access:9090"
          - "tenant-management:9090"
    relabel_configs:
      - source_labels: [__address__]
        regex: "([^:]+):.*"
        target_label: service

  - job_name: node-services
    static_configs:
      - targets:
          - "notification-center:3000"
          - "restaurant-pos:3000"
          - "shift-management:3000"
    metrics_path: /metrics

  - job_name: python-services
    static_configs:
      - targets:
          - "analytics-core:8000"
          - "marketing:8000"
    metrics_path: /metrics

  - job_name: java-services
    static_configs:
      - targets:
          - "billing-subscriptions:9090"
          - "payroll:9090"
    metrics_path: /actuator/prometheus
